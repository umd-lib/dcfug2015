<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=1024, user-scalable=no">

  <title>DC Fedora Users Group, March 31, 2015</title>

  <!-- Required stylesheet -->
  <link rel="stylesheet" media="screen" href="core/deck.core.css">

  <!-- Extension CSS files go here. Remove or add as needed. -->
  <link rel="stylesheet" media="screen" href="extensions/goto/deck.goto.css">
  <link rel="stylesheet" media="screen" href="extensions/menu/deck.menu.css">
  <link rel="stylesheet" media="screen" href="extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" media="screen" href="extensions/status/deck.status.css">
  <link rel="stylesheet" media="screen" href="extensions/scale/deck.scale.css">

  <!-- Style theme. More available in /themes/style/ or create your own. -->
  <link rel="stylesheet" href="themes/style/swiss.css">
	
  <!-- Transition theme. More available in /themes/transition/ or create your own. -->
  <link rel="stylesheet" media="screen" href="themes/transition/horizontal-slide.css">

  <!-- Basic black and white print styles -->
  <link rel="stylesheet" media="print" href="core/print.css">

  <!-- Required Modernizr file -->
  <script src="modernizr.custom.js"></script>
</head>
<body>
  <div class="deck-container">

    <!-- Begin slides. Just make elements with a class of slide. -->

  <section class="slide">
	<h2>Fedora Four Too:<br>
		Electric Boogaloo</h2>
	<h3>Peter Eichman<br>
	    Bria Parker<br>
	    Ben Wallberg<br>
	    Joshua Westgard<br>
		March 31, 2015
	</h3>
</section>

<section class="slide">
	<h2>From local to standard</h2>
	<ul>
	<li>UMD has been using locally created schemas for years</li>
	<ul>
	<li>Descriptive -- UMDM</li>
	<li>Administrative -- UMAM</li>
	</ul>
	<li>Fedora 4 gives us the opportunity (and motivation) to move from local schemas to standards</li>
	<li>MODS was a clear frontrunner</li>
	<ul>
	<li>most closely matched structure of existing metadata</li>
	<li>widely used</li>
	</ul>
	<li>UMDM --> MODS --> MODS RDF --> Fedora4</li>
	</ul>
</section>
<section class="slide">
	<img src="img/blank_node.png">
</section>
<section class="slide">
	<img src="img/blank_node2.png">
</section>
<section class="slide">
	<h2>Moving from XML to RDF</h2>
	<ul>
	<li>MODS RDF in it's current state is problematic for our use</li>
	<li>need to model the data, not remodel the XML (which is what the current iteration of MODS RDF does)</li>
	<li>blank nodes created by these hierarchies became an issue</li>
	<li>we're transitioning from hierarchical metadata structure to flat</li>
	</ul>
</section>

<section class="slide">
    <h2>General Implementation Setup</h2>
    <ul>
        <li>Currently building from 4.1.1</li>
        <li>Create an overlay WAR of our custom configuration</li>
        <li>Include role based access control (fcrepo-module-rbacl)</li>
        <li>Separately running services for:
            <ul>
                <li>Standalone infinispan instance</li>
                <li>JMS Messaging Consumer (same Tomcat as Fedora)</li>
                <li>Fuseki (standalone)</li>
                <li>Solr (remote server)</li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <h2>Fedora as a First Class Service</h2>
    <ul>
        <li>Expose the REST API directly</li>
        <li>Don't treat it as a "black box" dumb storage backend</li>
        <li>Allow for multiple front-end interfaces</li>
        <li>Use standards to support a variety of clients and tools</li>
    </ul>
</section>

<section class="slide">
    <h2>Challenges to Fedora as a First Class Service</h2>
    <ul>
        <li>Authorization must be implemented in the repository</li>
        <li>URIs we mint must be stable and persistant</li>
    </ul>
</section>

<section class="slide">
    <h2>URI Stability</h2>
    <ul>
        <li>Challenge: URIs we mint must be stable and persistant</li>
        <li>Challenge++: We will be federating in binaries from the file system,
        and these binaries may move around</li>
        <li>Solution:
            <ul>
                <li>One persistant tree of URIs (PCDM objects and
                collections)</li>
                <li>These persistant URIs then can point to the more mutable
                URIs in a separate tree (e.g., storage) through the
                <tt>message/external-body</tt> content type.</li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <h2>Authentication and Authorization</h2>
    <ul>
        <li>Challenge: Authorization must be implemented in the repository</li>
        <li>Challenge++: We want a mix of public access and authenticated
        access</li>
        <li>Solution: Authenticate with Tomcat, mix local users with LDAP, set
        ACL</li>
    </ul>
</section>

<section class="slide">
    <h2>Admin User</h2>
    <ul>
        <li>Define an admin user with the fedoraAdmin role in
        tomcat-users.xml</li>
    </ul>
    <pre><code>&lt;tomcat-users&gt;
    &lt;role rolename="fedoraAdmin"/&gt;
    &lt;role rolename="fedoraUser"/&gt;
    <strong>&lt;user username="admin" password="SECRET" roles="fedoraAdmin"/&gt;</strong>
&lt;/tomcat-users&gt;</code></pre>
</section>
<section class="slide">
    <h2>LDAP Authentication with JNDI</h2>
    <ul>
        <li><a href="https://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#JNDIRealm">Tomcat JNDI
        authentication realm</a> to use LDAP to authenticate regular users (fedoraUser).</li>
        <li>server.xml</li>
    </ul>
    <pre><code>&lt;Engine name="Catalina" defaultHost="localhost"&gt;
    &lt;!-- ... --&gt;
    &lt;Realm className="org.apache.catalina.realm.JNDIRealm"
      connectionURL="ldaps://directory.umd.edu"
      <strong>commonRole="fedoraUser"</strong>
      userPattern="uid={0},ou=people,dc=umd,dc=edu"
      /&gt;
    &lt;!-- ... --&gt;
&lt;/Engine&gt;</code></pre>
</section>

<section class="slide">
    <h2>Root ACL</h2>
    <ul>
        <li>Set an ACL on the root node that grants the "reader" permission to
        the special principal <tt>EVERYONE</tt></li>
        <li>Note the double slash in the URL path segment</li>
    </ul>
    <pre><code>$ curl https://fedora4dev.lib.umd.edu/fcrepo/rest//fcr:accessroles \
    -X POST \
    -H 'Content-Type: application/json' \
    <strong>-d '{"EVERYONE":["reader"]}' \</strong>
    -u admin:SECRET
    </code></pre>
</section>

<section class="slide">
    <h2>Authentication and Authorization: Outstanding Challenge</h2>
    <ul>
        <li>Challenge++: We want a mix of <strong>public access</strong> and
        authenticated access</li>
        <li><del>Solution</del><ins>Workaround</ins>:
            <ul>
                <li>Define a "public" or "anonymous" user with the fedoraUser role in
                tomcat-users.xml</li>
                <li>Distribute the password for that user.</li>
                <li>Not ideal; other solutions?</li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>Heading</h2>
	<ul>
	<li>Bullet Point #1</li>
	<li>Bullet Point #2</li>
	<li>Bullet Point #3</li>
	<li>Bullet Point #4</li>
	<li>Bullet Point #5</li>
	</ul>
</section>
<section class="slide">
	<h2>Thank you!</h2>
	    <h3>Peter Eichman (peichman@umd.edu)<br>
	    Bria Parker (blparker@umd.edu)<br>
	    Ben Wallberg (wallberg@umd.edu)<br>
	    Joshua Westgard (westgard@umd.edu)</h3>
</section>

    <!-- End slides. -->

    <!-- Begin extension snippets. Add or remove as needed. -->

    <!-- deck.navigation snippet -->
    <div aria-role="navigation">
      <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
      <a href="#" class="deck-next-link" title="Next">&#8594;</a>
    </div>

    <!-- deck.status snippet -->
    <p class="deck-status" aria-role="status">
      <span class="deck-status-current"></span>
      /
      <span class="deck-status-total"></span>
    </p>

    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
      <label for="goto-slide">Go to slide:</label>
      <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
      <datalist id="goto-datalist"></datalist>
      <input type="submit" value="Go">
    </form>

    <!-- End extension snippets. -->
  </div>

<!-- Required JS files. -->
<script src="jquery.min.js"></script>
<script src="core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
  $(function() {
    $.deck('.slide');
  });
</script>
</body>
</html>
